<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
        }
        h2 {
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .btn {
            width: 100%;
            padding: 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn:hover {
            background: #218838;
        }
        .link-btn {
            text-align: center;
            display: block;
            margin-top: 10px;
            color: #007bff;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        .appointment-requests {
            margin-top: 20px;
        }
        .request-card {
            background: #e9ecef;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .request-card button {
            margin-right: 10px;
        }
    </style>
</head>
<body>

<div class="container" id="patientPortal">
    <div id="loginScreen">
        <h2>Login</h2>
        <div class="form-group">
            <label>Email:</label>
            <input type="email" id="loginEmail" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
            <label>Password:</label>
            <input type="password" id="loginPassword" placeholder="Enter your password" required>
        </div>
        <button class="btn" onclick="login()">Login</button>
        <span class="link-btn" onclick="showSignup()">Create Account</span>
    </div>

    <div id="signupScreen" class="hidden">
        <h2>Create Account</h2>
        <div class="form-group">
            <label>Full Name:</label>
            <input type="text" id="signupName" placeholder="Enter your full name" required>
        </div>
        <div class="form-group">
            <label>Email:</label>
            <input type="email" id="signupEmail" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
            <label>Password:</label>
            <input type="password" id="signupPassword" placeholder="Create a password" required>
        </div>
        <button class="btn" onclick="signup()">Create Account</button>
        <span class="link-btn" onclick="showLogin()">Back to Login</span>
    </div>

    <div id="dashboard" class="hidden">
        <h2>Dashboard</h2>
        <div class="form-group">
            <label>Preferred Appointment Time:</label>
            <input type="text" id="appointmentTime" placeholder="Enter preferred time" required>
        </div>
        <div class="form-group">
            <label>Reason for Visit:</label>
            <input type="text" id="appointmentReason" placeholder="Enter reason" required>
        </div>
        <button class="btn" onclick="sendAppointmentRequest()">Send Appointment Request</button>
        <div class="appointment-requests" id="appointmentRequests"></div>
        <button class="btn" onclick="logout()">Logout</button>
    </div>
</div>

<div class="container hidden" id="adminPortal">
    <h2>Admin Portal</h2>
    <div id="adminRequests"></div>
    <button class="btn" onclick="logoutAdmin()">Logout</button>
</div>

<script>
    const users = [];
    const appointments = [];
    let currentUser = null;

    function showSignup() {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('signupScreen').classList.remove('hidden');
    }

    function showLogin() {
        document.getElementById('signupScreen').classList.add('hidden');
        document.getElementById('loginScreen').classList.remove('hidden');
    }

    function login() {
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        const user = users.find(u => u.email === email && u.password === password);
        if (user) {
            currentUser = user;
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            loadAppointments();
        } else {
            alert('Invalid email or password');
        }
    }

    function signup() {
        const name = document.getElementById('signupName').value;
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;

        if (users.some(u => u.email === email)) {
            alert('Email already exists');
            return;
        }

        users.push({ name, email, password });
        alert('Account created successfully!');
        showLogin();
    }

    function sendAppointmentRequest() {
        const time = document.getElementById('appointmentTime').value;
        const reason = document.getElementById('appointmentReason').value;

        if (!time || !reason) {
            alert('Please fill in all fields');
            return;
        }

        const appointment = {
            patient: currentUser.name,
            time,
            reason,
            status: 'pending'
        };

        appointments.push(appointment);
        alert('Appointment request sent!');
        loadAppointments();
    }

    function loadAppointments() {
        const appointmentRequests = document.getElementById('appointmentRequests');
        appointmentRequests.innerHTML = appointments
            .filter(a => a.patient === currentUser.name)
            .map(a => `<div>${a.time} - ${a.reason} (${a.status})</div>`)
            .join('');
    }

    function logout() {
        currentUser = null;
        document.getElementById('dashboard').classList.add('hidden');
        document.getElementById('loginScreen').classList.remove('hidden');
    }

    function showAdminPortal() {
        document.getElementById('patientPortal').classList.add('hidden');
        document.getElementById('adminPortal').classList.remove('hidden');
        loadAdminRequests();
    }

    function loadAdminRequests() {
        const adminRequests = document.getElementById('adminRequests');
        adminRequests.innerHTML = appointments
            .map((a, index) => `
                <div class="request-card">
                    <div>${a.patient} requests an appointment on ${a.time} for ${a.reason}</div>
                    <button class="btn" onclick="acceptRequest(${index})">Accept</button>
                    <button class="btn" onclick="denyRequest(${index})">Deny</button>
                </div>
            `).join('');
    }

    function acceptRequest(index) {
        appointments[index].status = 'accepted';
        loadAdminRequests();
    }

    function denyRequest(index) {
        appointments[index].status = 'denied';
        loadAdminRequests();
    }

    function logoutAdmin() {
        document.getElementById('adminPortal').classList.add('hidden');
        document.getElementById('patientPortal').classList.remove('hidden');
    }
</script>

</body>
</html>
